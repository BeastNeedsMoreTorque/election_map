<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font-family: Helvetica, sans-serif;
  font-size:16px;
  background-color: black;
}

.inner-div {
  width: 340px;
  margin: 0 auto;
}

.tooltip {
  width: 350px;
  background-color: white;
  /*opacity: 0.9;*/
  height: 78px;
}

.tail {
    width: 0px;
    height: 0px;
    border: 10px solid;
    border-color: white transparent transparent transparent;
    position:absolute;
    top: 85px;
    left: 170px;
    /*opacity: 0.9;*/
}

.big-row {
  font-size: 16px;
  font-weight: bold;
}

.small-row {
  font-size: 12px;
}

.main-prediction {
  color: white;
  width: 50px;
}

.riding-name { font-weight: bold; text-align: center;}

.label {color: black; text-align: right;}

.col { text-align: center; }

</style>

<body></body>

<script src="d3.v3.min.js"></script>
<script>


var party_colours = {'ndp': '#F78320', 'con': '#263893', 'lib': '#D71921',
                     'grn': '#3D9B35', 'blc': '#00A7EC', 'oth': 'grey'};

dataz = {"con":{"low": '40.9', "med": '40.0', 'high': '40.0'}, 
        "lib":{"low": '40.9', "med": '40.0', 'high': '40.0'},
        "ndp":{"low": '40.9', "med": '40.0', 'high': '40.0'},
        "blc":{"low": '40.9', "med": '40.0', 'high': '40.0'},
        "grn":{"low": '40.9', "med": '40.0', 'high': '40.0'},
        "oth":{"low": '40.9', "med": '40.0', 'high': '40.0'},
        "main":{"leader": "ndp", "likelyhood": '84%'}
};

draw_tooltip(400,300, dataz);

function draw_tooltip(x, y, data) {

  var tooltip = d3.select("body").append("div").attr('class', 'tooltip');
  var tail = d3.select("body").append("div").attr("class", "tail");

  var inner_div = tooltip.append("div").attr("class", 'inner-div');

  inner_div.append("div").attr("class", "riding-name").text("Fleetwood - Port Kells");

  var prediction_table = inner_div.append("table").attr("class", "prediction-table");

  var row1 = prediction_table.append("tr").attr("class", "small-row");
  var row2 = prediction_table.append("tr").attr("class", "big-row");
  var row3 = prediction_table.append("tr").attr("class", "small-row");

  row1.append("td").attr("class", "label").text("High / Haut");
  row2.append("td").attr("class", "label").text("");
  row3.append("td").attr("class", "label").text("Low / Bas");

  parties = ['con', 'lib', 'ndp', 'blc', 'grn', 'oth'];
  for (var i = 0; i < parties.length; i++) {
    row1.append("td")
        .attr("class", "col")
        .style("color", party_colours[parties[i]])
        .text(data[parties[i]].high);

    row2.append("td")
        .attr("class", "col")
        .style("color", party_colours[parties[i]])
        .text(data[parties[i]].med);

    row3.append("td")
        .attr("class", "col")
        .style("color", party_colours[parties[i]])
        .text(data[parties[i]].low);
  };

  row2.append("td")
      .attr("class", "col main-prediction")
      .style("background-color", party_colours[data.main.leader])
      .text(data.main.likelyhood);

  tooltip.style("transform", "translate("+ x + "px," + y + "px)");
  tooltip.style("-ms-transform", "translate("+ x + "px," + y + "px)"); // IE 9
  tooltip.style("-webkit-transform", "translate("+ x + "px," + y + "px)"); // Safari

  tail.style("transform", "translate("+ x + "px," + y + "px)");
  tail.style("-ms-transform", "translate("+ x + "px," + y + "px)"); // IE 9
  tail.style("-webkit-transform", "translate("+ x + "px," + y + "px)"); // Safari

}

</script>